if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("PolarisProfessionalAccountSettingsUtils",[],(function(a,b,c,d,e,f){a=Object.freeze({add_whatsapp:"add_whatsapp",link_completion:"link_completion"});b=Object.freeze({ig_account_type_check_failure:"IG_ACCOUNT_TYPE_CHECK_FAILURE",verified:"VERIFIED"});f.AccountSettingsScreen=a;f.WhatsAppNumberVerificationResult=b}),66);
__d("PolarisProfessionalAccountSettingsActions",["PolarisConfig","PolarisConsumerDataCache","PolarisInstajax","PolarisLinkBuilder","PolarisProfessionalAccountLogger","PolarisProfessionalAccountLoggerUtils","PolarisProfessionalAccountSettingsActionTypes","PolarisProfessionalAccountSettingsPageStrings","PolarisProfessionalAccountSettingsUtils","PolarisProfessionalOnboardingLogger","PolarisToastActions","PolarisrunPromise","PolarisuserSelectors","configureUrlForWebAPI","uuid"],(function(a,b,c,d,e,f,g){function a(a){var b=c("configureUrlForWebAPI")("/api/v1/business/account/get_public_business_contact_info/");return d("PolarisInstajax").get(b,{ig_professional_account_id:a},{withCredentials:!0})}function b(a){a=new(d("PolarisProfessionalAccountLogger").ProfessionalAccountLogger)(d("PolarisConfig").getViewerId(),c("uuid")(),a);return{logger:a,type:d("PolarisProfessionalAccountSettingsActionTypes").INIT_PROFESSIONAL_ACCOUNT_LOGGER}}function e(a){a===void 0&&(a=!0);a=a?new(d("PolarisProfessionalOnboardingLogger").ProfessionalOnboardingLogger)(d("PolarisConfig").getViewerId(),c("uuid")()):null;return{onboardingLogger:a,type:d("PolarisProfessionalAccountSettingsActionTypes").SET_PROFESSIONAL_ONBOARDING_LOGGER}}function h(a){return{isEdited:a,type:d("PolarisProfessionalAccountSettingsActionTypes").SET_IS_EDITED}}function f(a){return{categoryName:a,type:d("PolarisProfessionalAccountSettingsActionTypes").SET_CATEGORY_NAME}}function i(a){return{categoryId:a,type:d("PolarisProfessionalAccountSettingsActionTypes").SET_CATEGORY_ID}}function j(a){return{requestInFlight:a,type:d("PolarisProfessionalAccountSettingsActionTypes").SET_PRO_ACCOUNT_SETTINGS_PAGE_REQUEST_IN_FLIGHT}}function k(a,b,e,f,g,h,i,j,k){var l=c("configureUrlForWebAPI")("/api/v1/accounts/update_business_info/");e={should_show_category:e===!0?1:0,category_id:b};k!==void 0&&k!==null&&(e.should_show_public_contacts=k===!0?1:0);f!==void 0&&f!==null&&(e.public_email=f);if(j!==void 0&&j!==null){b=JSON.stringify({public_phone_number:j,business_contact_method:a});e.public_phone_contact=b}if(h!==void 0&&h!==null&&h!==""){k=g!==void 0&&g!==null?g:"";f=i!==void 0&&i!==null?i:"";e.business_address=JSON.stringify({address_street:k,city_id:h,zip:f})}return d("PolarisInstajax").post(l,e,{withCredentials:!0})}function l(a,b,e,f,g,i,l,m,n){var o;e===void 0?o="":o=e;return function(p,q){q=q();var r=q.professionalAccountSettings;q=d("PolarisuserSelectors").getViewer(q);var s=(q==null?void 0:q.username)||!1,t=r.logger,u=r.onboardingLogger;c("PolarisrunPromise")(k(a,b,e,f,g,i,l,m,n).then(function(a){t&&(t.logSubmit(d("PolarisProfessionalAccountLoggerUtils").Flow.edit_profile,d("PolarisProfessionalAccountLoggerUtils").Step.professional_account_settings,d("PolarisProfessionalAccountLoggerUtils").Component.save_info,{address:g,email:f,category_id:b,should_show_category:o?"true":"false"}),t.logFinishStep(d("PolarisProfessionalAccountLoggerUtils").Flow.edit_profile,d("PolarisProfessionalAccountLoggerUtils").Step.professional_account_settings)),u&&(u.logSubmit(d("PolarisProfessionalAccountLoggerUtils").Step.edit_contact_info,d("PolarisProfessionalAccountLoggerUtils").Component.save_info,{address:g,email:f,phone:m,should_show_public_contacts:o?"true":"false"}),u.logFinishStep(d("PolarisProfessionalAccountLoggerUtils").Step.edit_contact_info)),s&&d("PolarisConsumerDataCache").invalidatePath(d("PolarisLinkBuilder").buildUserLink(s)),p(h(!1)),p(j(!1)),p(d("PolarisToastActions").showToast({text:d("PolarisProfessionalAccountSettingsPageStrings").PROFILE_SAVED_TOAST_MESSAGE})),p({proOnboardingContactOptionsSaved:!0,type:d("PolarisProfessionalAccountSettingsActionTypes").PRO_ONBOARDING_CONTACT_OPTIONS_SAVED})},function(a){if(t){var c;t.logSubmitError(d("PolarisProfessionalAccountLoggerUtils").Flow.edit_profile,d("PolarisProfessionalAccountLoggerUtils").Step.professional_account_settings,d("PolarisProfessionalAccountLoggerUtils").Component.save_info,(c=a.responseObject)==null?void 0:c.error_identifier,(c=a.responseObject)==null?void 0:c.message,{address:g,email:f,category_id:b,should_show_category:o?"true":"false"})}if(u){u.logSubmitError(d("PolarisProfessionalAccountLoggerUtils").Step.edit_contact_info,d("PolarisProfessionalAccountLoggerUtils").Component.save_info,(c=a.responseObject)==null?void 0:c.error_identifier,a.responseText,{address:g,email:f,phone:m,should_show_public_contacts:o?"true":"false"})}p(j(!1));a=((c=a.responseObject)==null?void 0:c.message)||d("PolarisProfessionalAccountSettingsPageStrings").PROFILE_SAVED_ERROR_MESSAGE;p(d("PolarisToastActions").showToast({text:a}))}))["catch"](function(a){if(t){var c;t.logSubmitError(d("PolarisProfessionalAccountLoggerUtils").Flow.edit_profile,d("PolarisProfessionalAccountLoggerUtils").Step.professional_account_settings,d("PolarisProfessionalAccountLoggerUtils").Component.save_info,(c=a.responseObject)==null?void 0:c.error_identifier,(c=a.responseObject)==null?void 0:c.message,{address:g,email:f,category_id:b,should_show_category:o?"true":"false"})}if(u){u.logSubmitError(d("PolarisProfessionalAccountLoggerUtils").Step.edit_contact_info,d("PolarisProfessionalAccountLoggerUtils").Component.save_info,(c=a.responseObject)==null?void 0:c.error_identifier,a.responseText,{address:g,email:f,phone:m,should_show_public_contacts:o?"true":"false"})}p(j(!1));a=((c=a.responseObject)==null?void 0:c.message)||d("PolarisProfessionalAccountSettingsPageStrings").PROFILE_SAVED_ERROR_MESSAGE;p(d("PolarisToastActions").showToast({text:a}))})}}function m(a,b){var e=c("configureUrlForWebAPI")("/api/v1/business/account/create_whatsapp_link/");a={whatsapp_nonce:a,whatsapp_phone_number:b};return d("PolarisInstajax").post(e,a,{withCredentials:!0})}function n(a,b,e,f){return function(g,h){h=h();h=h.professionalAccountSettings;var i=h.logger;c("PolarisrunPromise")(m(e,f).then(function(c){c.result===d("PolarisProfessionalAccountSettingsUtils").WhatsAppNumberVerificationResult.verified?(i&&(i.logSubmit(d("PolarisProfessionalAccountLoggerUtils").Flow.edit_profile,d("PolarisProfessionalAccountLoggerUtils").Step.add_whatsapp_link,d("PolarisProfessionalAccountLoggerUtils").Component.save_info),i.logFinishStep(d("PolarisProfessionalAccountLoggerUtils").Flow.edit_profile,d("PolarisProfessionalAccountLoggerUtils").Step.add_whatsapp_link)),a(d("PolarisProfessionalAccountLoggerUtils").Step.whatsapp_link_confirmation)):c.result===d("PolarisProfessionalAccountSettingsUtils").WhatsAppNumberVerificationResult.ig_account_type_check_failure?(i&&i.logSubmitError(d("PolarisProfessionalAccountLoggerUtils").Flow.edit_profile,d("PolarisProfessionalAccountLoggerUtils").Step.add_whatsapp_link,d("PolarisProfessionalAccountLoggerUtils").Component.save_info,"DISALLOWED_IG_ACCOUNT_TYPE"),b(!0)):(i&&i.logSubmitError(d("PolarisProfessionalAccountLoggerUtils").Flow.edit_profile,d("PolarisProfessionalAccountLoggerUtils").Step.add_whatsapp_link,d("PolarisProfessionalAccountLoggerUtils").Component.save_info,"GENERIC_WHATSAPP_LINKING_ERROR"),g(d("PolarisToastActions").showToast({text:d("PolarisProfessionalAccountSettingsPageStrings").WHATSAPP_LINKING_ERROR}))),g(j(!1))},function(a){if(i){var b;i.logSubmitError(d("PolarisProfessionalAccountLoggerUtils").Flow.edit_profile,d("PolarisProfessionalAccountLoggerUtils").Step.add_whatsapp_link,d("PolarisProfessionalAccountLoggerUtils").Component.save_info,(b=a.responseObject)==null?void 0:b.error_identifier,(b=a.responseObject)==null?void 0:b.message)}g(j(!1));g(d("PolarisToastActions").showToast({text:d("PolarisProfessionalAccountSettingsPageStrings").WHATSAPP_LINKING_ERROR}))}))}}g.getBusinessPublicContactInfo=a;g.initProfessionalAccountLogger=b;g.setProfessionalOnboardingLogger=e;g.setIsEdited=h;g.setCategoryName=f;g.setCategoryId=i;g.setRequestInFlight=j;g.updateProfessionalAccountInfo=k;g.updateProfessionalSettingsInfo=l;g.createWhatsAppLinkAjaxRequest=m;g.createWhatsAppLink=n}),98);